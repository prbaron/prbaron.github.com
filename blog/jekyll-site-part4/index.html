<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>PB | Jekyll Site Part4</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Pierre Baron">
    <meta name="keyword" content="jekyll, tutoriel, jekyll french, tuto jekyll fr">

    <link rel="shortcut icon" href="/img/favicon.png">
    <link rel="apple-touch-icon-precomposed" href="/img/favicon.png">

    <link rel="stylesheet" href="/css/style.css">
</head>
<script>

</script>
<body>

<header>
    <div class="navbar navbar-default" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">
                    <img src="/img/logo.png" alt="logo"/> pierrebaron
                </a>
            </div>
            <div class="navbar-collapse collapse navbar-right">
                <ul class="nav navbar-nav">
    
    
    
    <li class=""><a href="/">HOME</a></li>
    
    
    
    
    
    <li class="active"><a href="/blog/">BLOG</a></li>
    
    
    
    <li class=""><a href="/contact/">CONTACT</a></li>
    
</ul>
            </div>
            <!--/.nav-collapse -->
        </div>
        <!-- .container -->
    </div>
    <!-- .navbar -->

    <div class="tagline tagline-primary">
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <div class="tagline-title">Créer un site avec Jekyll. Partie 4 - Les catégories</div>
            </div>
        </div>
        <!-- .row -->
    </div>
    <!-- .container -->
</div>
<!-- .tagline -->
</header>


<section class="section">
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <div class="post">
                    <p class="post-subtitle">
                        <i class="fa fa-clock-o"></i> 08/02/2014 |
                        <i class="fa fa-user"></i>
                        Pierre Baron
                        
                    </p>
                    
                    <div class="post-actions">
                        <ul>
                            
                            <li><a href="http://pierrebaron.fr/tuto_blog_jekyll/" class="btn btn-primary">Démonstration</a></li>
                            
                            
                            <li><a href="https://github.com/prbaron/tuto_blog_jekyll/tree/chapitre4" class="btn btn-ghost btn-default">Sources</a></li>
                            
                        </ul>
                    </div>

                    

                    

                    <p>Nous avons pu voir, dans le chapitre 3, comment créer notre blog avec Jekyll. Cependant, celui ci est encore basique car il ne possède pas de catégorie ou de système de commentaires (nous règlerons ceci dans le chapitre 5).</p>

<ol>
  <li><a href="/blog/jekyll-site-part1">Partie 1 - Introduction &amp; Installation</a></li>
  <li><a href="/blog/jekyll-site-part2">Partie 2 - Création des pages</a></li>
  <li><a href="/blog/jekyll-site-part3">Partie 3 - Création du blog</a></li>
  <li><a href="/blog/jekyll-site-part4">Partie 4 - Gestion des catégories</a></li>
  <li><a href="/blog/jekyll-site-part5">Partie 5 - Finitions</a></li>
  <li><a href="/blog/jekyll-site-part6">Partie 6 - Déploiement</a></li>
</ol>

<h2 id="ajout-de-la-catgorie-dans-le-front-matter">Ajout de la catégorie dans le front matter</h2>

<p>Nous avons déjà les informations minimales à ajouter au front matter d’un article markdown pour qu’il soit correctement compris comme faisant parti du blog. Nous allons maintenant y ajouter une propriété indiquant le nom de la catégorie.</p>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="language-yaml" data-lang="yaml">1
2
3
4
5</code></pre></div></td><td class="code"><div class="highlight"><pre><span class="nn">---</span>
<span class="l-Scalar-Plain">layout</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">post</span>
<span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span>  <span class="s">&quot;Post</span><span class="nv"> </span><span class="s">un&quot;</span>
<span class="l-Scalar-Plain">category</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">one</span>
<span class="nn">---</span>
</pre></div>
</td></tr></table>

<p>Vous pouvez, bien sûr, entrer n’importe quel nom (exemple : Computer, ma longue catégorie, …);</p>

<h2 id="lister-les-catgories">Lister les catégories</h2>

<p>Le principe va être d’afficher la liste de toutes les catégories du site et d’afficher la liste de tous les articles pour une catégorie.</p>

<p>Créez un nouveau fichier <strong>_includes/categories.html</strong> et copiez y le code suivant.</p>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="language-html" data-lang="html">1
2
3
4</code></pre></div></td><td class="code"><div class="highlight"><pre><span class="nt">&lt;h2&gt;</span>Catégories<span class="nt">&lt;/h2&gt;</span>
{% for category in site.categories %}
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{site.url}}/categories/{{ category[0] }}.html&quot;</span><span class="nt">&gt;</span>{{ category[0] }}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
{% endfor %}
</pre></div>
</td></tr></table>

<p>Ce bout de code permet de créer une liste de liens affichant toutes les catégories présentes dans votre blog. Contrairement à des CMS avec des langages dynamiques, Jekyll ne permet pas de générer automatiquement les pages de catégories (Sauf avec un plugin Jekyll mais ce n’est pas l’objectif de ce tutoriel).</p>

<p>Il va donc falloir créer un dossier <strong>categories</strong> à la racine de votre projet Jekyll. Vous allez devoir créer manuellement un fichier par catégorie que vous décidez d’ajouter à vos articles. Le nom du fichier doit être le nom de la catégorie (exemple : one.html). Le seul élément à modifier est le title contenu dans le front matter.</p>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="language-yaml" data-lang="yaml">1
2
3
4
5
6</code></pre></div></td><td class="code"><div class="highlight"><pre><span class="nn">---</span>
<span class="l-Scalar-Plain">layout</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">default</span>
<span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">one</span>
<span class="nn">---</span>

<span class="p-Indicator">{</span><span class="err">%</span> <span class="nv">include category.html %</span><span class="p-Indicator">}</span>
</pre></div>
</td></tr></table>

<h2 id="lister-les-articles-par-catgorie">Lister les articles par catégorie</h2>
<p>Dans la section précédente, nous faisons un appel à un élément contenu dans le dossier <strong>_includes</strong> mais nous n’avons pas créé ce dernier. Créez le fichier <strong>_includes/category.html</strong>, et copiez y le code suivant :</p>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="language-html" data-lang="html">1
2
3
4
5
6
7
8</code></pre></div></td><td class="code"><div class="highlight"><pre>{% for post in site.categories[page.title]  %}
<span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;h3&gt;</span>{{ post.title }} <span class="nt">&lt;small&gt;</span>{{post.date | date_to_string }}<span class="nt">&lt;/small&gt;&lt;/h3&gt;</span>
    <span class="nt">&lt;p&gt;</span>{{post.excerpt}}<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{site.url}}{{post.url}}&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-default&quot;</span><span class="nt">&gt;</span>Lire plus<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;hr&gt;</span>
{% endfor %}
</pre></div>
</td></tr></table>

<p>Ce bout de code permet de lister tous les articles relatif à la catégorie choisie. Il n’y a pas de pagination. Il ne faut pas oublier que Jekyll est un générateur statique et possède donc moins de fonctionnalités qu’un CMS dynamique.</p>

<h2 id="afficher-la-liste-des-catgories-sur-le-site">Afficher la liste des catégories sur le site</h2>

<p>Nous avons la liste des catégories, la liste des articles par catégories, maintenant, il nous faut relier le tout et afficher l
Maintenant, il faut ajouter cet élément dans le layout relatif aux articles. Editez le fichier <strong>_layout/post.html</strong>.</p>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="language-html" data-lang="html"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41</code></pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;X-UA-Compatible&quot;</span> <span class="na">content=</span><span class="s">&quot;IE=edge,chrome=1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>{{ page.title }}<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;{{site.url}}/css/bootstrap.min.css&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    {% include menu.html %}

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>

        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-md-8&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;h1&gt;</span>{{ page.title }} <span class="nt">&lt;small&gt;</span>{{ page.date | date_to_string }}<span class="nt">&lt;/small&gt;&lt;/h1&gt;</span>
                {{ content }}

                <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;pager&quot;</span><span class="nt">&gt;</span>
                    {% if page.previous %}
                        <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;previous&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{site.url}}{{ page.previous.url }}&quot;</span><span class="nt">&gt;</span><span class="ni">&amp;larr;</span> {{ page.previous.title }} <span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
                    {% endif %}
                    {% if page.next %}
                        <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;next&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;{{site.url}}{{ page.next.url }}&quot;</span><span class="nt">&gt;</span>{{ page.next.title }} <span class="ni">&amp;rarr;</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
                    {% endif %}
                <span class="nt">&lt;/ul&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-md-4&quot;</span><span class="nt">&gt;</span>
                {% include categories.html %}
            <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>

        {% include footer.html %}
    <span class="nt">&lt;/div&gt;</span> <span class="c">&lt;!-- /container --&gt;</span>

    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;{{site.url}}/js/bootstrap.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</td></tr></table>

<h2 id="conclusion">Conclusion</h2>

<p>Cette partie nous a permis de voir la gestion des catégories. Celle ci est beaucoup plus manuelle que pour les autres CMS, mais elle ne demande pas vraiment d’effort et, à ce stade du tutoriel, vous avez sûrement compris le code très facilement.</p>

<p>Dans le prochain chapitre, nous verrons comment ajouter les commentaires, et les fonctionnalités finales pour avoir un site parfait.</p>


                    
                    <div class="disqus">
                        <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'pierrebaron'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>    
                    </div>
                    
                </div>
                <!-- .post -->
            </div>
            <!-- .col -->
            <div class="col-md-4">
                <div class="widget-categories">
    <h4 class="title-underline title-inverse">Categories</h4>

    
    
    <p>
        <span class="badge pull-right">7</span>

        <a href="/categories/article.html">
            <i class="fa fa-angle-right"></i> article
        </a>
    </p>
    
    <p>
        <span class="badge pull-right">4</span>

        <a href="/categories/blog.html">
            <i class="fa fa-angle-right"></i> blog
        </a>
    </p>
    
    <p>
        <span class="badge pull-right">6</span>

        <a href="/categories/plugin.html">
            <i class="fa fa-angle-right"></i> plugin
        </a>
    </p>
    
    <p>
        <span class="badge pull-right">8</span>

        <a href="/categories/tutoriel.html">
            <i class="fa fa-angle-right"></i> tutoriel
        </a>
    </p>
    
    </ul>
</div>
            </div>
            <!-- .col -->
        </div>
        <!-- .row -->
    </div>
    <!-- .container -->
</section>

<footer class="footer footer-inverse">
    <section class="footer-information">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h4 class="title-underline title-default">A propos</h4>

                    <p>Pierre Baron est ingénieur informaticien spécialisé en domotique et services à l'habitat.</p>
                </div>
                <div class="col-md-4">
                    <h4 class="title-underline title-default">Socialisons nous</h4>

                    <p>
                        <a href="mailto:prbaron22@gmail.com"><i class="fa fa-envelope-o"></i></a>
                        <a href="skype:prbaron"><i class="fa fa-skype"></i></a>
                        <a href="https://twitter.com/prbaron"><i class="fa fa-twitter"></i></a>
                        <a href="https://github.com/prbaron"><i class="fa fa-github-alt"></i></a>
                    </p>
                </div>
                <div class="col-md-4">
                    <h4 class="title-underline title-default">Menu</h4>

                    <p>
                        
                            <a href="/">HOME</a>
                        
                            <a href="/blog/">BLOG</a>
                        
                            <a href="/contact/">CONTACT</a>
                        
                    </p>
                </div>
            </div>
            <!--.row -->
        </div>
        <!--.container -->
    </section>
    <section class="footer-copyright">
        <div class="container ">
            <div class="row">
                <div class="col-sm-12 text-center">
                    <p>2012 - 2014 &copy; Pierre Baron</p>
                </div>
            </div>
            <!--.row -->
        </div>
        <!--.container -->
    </section>
</footer>
<!-- .footer -->


    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-21369110-4']);
        _gaq.push(['_setDomainName', '']); // Multiple sub-domains
        _gaq.push(['_setAllowLinker', true]); // Multiple TLDs
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>


<script src="/js/vendor.all.js"></script>
<script src="/js/app.js"></script>
</body>
</html>